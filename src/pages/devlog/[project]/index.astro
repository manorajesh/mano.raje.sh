---
import Default from '../../../layouts/Default.astro';
import BackButton from '../../../components/BackButton.astro';
import '../../../styles/global.css';
import { getCollection } from 'astro:content';
import Identicon from '../../../components/Identicon.astro';

const allPosts = await getCollection('devlog');
const { project } = Astro.params;
const projectPosts = allPosts.filter(post => post.data.project === project);
const numPosts = projectPosts.length;
const today = new Date();
const formattedToday = `${today.toLocaleString("default", {
          month: "short",
        })} ${today.getDate()} ${today.getFullYear()}`;
---

<Default title="Devlog">
    <main>
      <BackButton title='devlog' href='/devlog'/>
      <h1 class="title text-gradient">/devlog/{project}</h1>
      <sub style="color: gray">ll /var/log/{project}</sub>
      <hr>
      <p class="ls-output"><a href={`/devlog/${project}`}>dr-xr-xr-x {numPosts+2} mano&nbsp;&nbsp;4096 {formattedToday}&nbsp;.</a></p>
      <p class="ls-output"><a href={`/devlog`}>dr-xr-xr-x 2 mano&nbsp;&nbsp;4096 {formattedToday}&nbsp;..</a></p>
      {
        projectPosts.map((post: any) => {
          const date = new Date(post.data.date);
          const formattedDate = `${date.toLocaleString("default", {
            month: "short",
          })} ${date.getDate()} ${date.getFullYear()}`;
          return (
            <p class="ls-output"><a href={`/devlog/${post.slug}`}>-r--r--r-- 1 mano&nbsp;&nbsp;4096 {formattedDate}&nbsp;'{post.data.title}.md'</a></p>
          );
        })
      }
    </main>
  </Default>
  
  
  <style>
    * {
      font-family: monospace;
    }
    .title {
      font-size: 3rem;
      margin-bottom: 0;
      
    }
  
    sub {
      font-size: 1rem;
      margin-top: 0;
      margin-bottom: 2rem;
      /* color: var(--accent-gradient); */
    }
  
    a {
      color: #ffffff;
      text-decoration: none;
    }
  
    a:hover {
      /* gradient */
      background: -webkit-linear-gradient(#e5a9a9, #805ede);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
  
    .subheading {
      font-size: 1rem;
      font-weight: 400;
      color: #cacaca;
      margin-left: 1rem;
      text-wrap: nowrap;
    }
  
    .post-heading {
      display: flex;
      align-items: center;
    }
  
    .post-link {
      display: flex;
      justify-content: space-between; /* New Line */
      align-items: center;
      text-decoration: none;
      width: 100%; /* New Line */
    }
  
    .posttitle {
      font-size: clamp(2px, 4vw, 2rem);
      font-weight: 600;
      margin-right: 1rem;
      text-wrap: nowrap;
    }
  
    .line {
      flex-grow: 1;
      height: min(2px, 0.3vw);
      background-color: #333;
      min-width: 10px; /* Optional, to ensure it shows when title and date are long */
      display: inline-block;
    }
  
    .footer {
      font-size: 1rem;
      margin-top: 2rem;
      margin-bottom: 2rem;
    }
  
    .ls-output {
      margin-top: 0;
      margin-bottom: 0;
      line-height: 1.5;
    }
  </style>